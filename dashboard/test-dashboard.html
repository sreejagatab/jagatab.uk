<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Test Suite - Jagatab Blog Dashboard</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 2rem;
            background: #f8fafc;
            color: #1f2937;
        }
        
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .test-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid #1e40af;
        }
        
        .test-section h3 {
            color: #1e40af;
            margin-bottom: 1rem;
        }
        
        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            margin: 0.5rem 0;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .test-name {
            font-weight: 500;
        }
        
        .test-status {
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-pass {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-fail {
            background: #fef2f2;
            color: #dc2626;
        }
        
        .status-pending {
            background: #fef3c7;
            color: #d97706;
        }
        
        .test-button {
            padding: 0.5rem 1rem;
            background: #1e40af;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-left: 1rem;
        }
        
        .test-button:hover {
            background: #3b82f6;
        }
        
        .test-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .test-results {
            margin-top: 2rem;
            padding: 1rem;
            background: #f3f4f6;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .summary-card {
            text-align: center;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        
        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            color: #1e40af;
        }
        
        .summary-label {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .run-all-btn {
            display: block;
            width: 200px;
            margin: 2rem auto;
            padding: 1rem 2rem;
            background: #059669;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }
        
        .run-all-btn:hover {
            background: #047857;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1><i class="fas fa-vial"></i> Dashboard Test Suite</h1>
            <p>Comprehensive testing for all dashboard functionality</p>
        </div>

        <div class="summary">
            <div class="summary-card">
                <div class="summary-value" id="total-tests">0</div>
                <div class="summary-label">Total Tests</div>
            </div>
            <div class="summary-card">
                <div class="summary-value" id="passed-tests">0</div>
                <div class="summary-label">Passed</div>
            </div>
            <div class="summary-card">
                <div class="summary-value" id="failed-tests">0</div>
                <div class="summary-label">Failed</div>
            </div>
            <div class="summary-card">
                <div class="summary-value" id="success-rate">0%</div>
                <div class="summary-label">Success Rate</div>
            </div>
        </div>

        <button class="run-all-btn" onclick="runAllTests()">
            <i class="fas fa-play"></i> Run All Tests
        </button>

        <div class="test-section">
            <h3><i class="fas fa-cog"></i> Core Dashboard Tests</h3>
            <div class="test-item">
                <span class="test-name">Dashboard Initialization</span>
                <div>
                    <span class="test-status status-pending" id="test-init">Pending</span>
                    <button class="test-button" onclick="testDashboardInit()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Navigation System</span>
                <div>
                    <span class="test-status status-pending" id="test-nav">Pending</span>
                    <button class="test-button" onclick="testNavigation()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Section Switching</span>
                <div>
                    <span class="test-status status-pending" id="test-sections">Pending</span>
                    <button class="test-button" onclick="testSectionSwitching()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Toast Notifications</span>
                <div>
                    <span class="test-status status-pending" id="test-toast">Pending</span>
                    <button class="test-button" onclick="testToastNotifications()">Test</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fab fa-github"></i> GitHub Converter Tests</h3>
            <div class="test-item">
                <span class="test-name">URL Validation</span>
                <div>
                    <span class="test-status status-pending" id="test-url-validation">Pending</span>
                    <button class="test-button" onclick="testUrlValidation()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">README Fetching</span>
                <div>
                    <span class="test-status status-pending" id="test-readme-fetch">Pending</span>
                    <button class="test-button" onclick="testReadmeFetching()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Conversion Process</span>
                <div>
                    <span class="test-status status-pending" id="test-conversion">Pending</span>
                    <button class="test-button" onclick="testConversionProcess()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Queue Management</span>
                <div>
                    <span class="test-status status-pending" id="test-queue">Pending</span>
                    <button class="test-button" onclick="testQueueManagement()">Test</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-file-alt"></i> Blog Management Tests</h3>
            <div class="test-item">
                <span class="test-name">Blog Post Loading</span>
                <div>
                    <span class="test-status status-pending" id="test-blog-loading">Pending</span>
                    <button class="test-button" onclick="testBlogPostLoading()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Search Functionality</span>
                <div>
                    <span class="test-status status-pending" id="test-search">Pending</span>
                    <button class="test-button" onclick="testSearchFunctionality()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Filter System</span>
                <div>
                    <span class="test-status status-pending" id="test-filter">Pending</span>
                    <button class="test-button" onclick="testFilterSystem()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">View Switching</span>
                <div>
                    <span class="test-status status-pending" id="test-view-switch">Pending</span>
                    <button class="test-button" onclick="testViewSwitching()">Test</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-chart-bar"></i> Analytics Tests</h3>
            <div class="test-item">
                <span class="test-name">Analytics Loading</span>
                <div>
                    <span class="test-status status-pending" id="test-analytics-loading">Pending</span>
                    <button class="test-button" onclick="testAnalyticsLoading()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Chart Rendering</span>
                <div>
                    <span class="test-status status-pending" id="test-chart-render">Pending</span>
                    <button class="test-button" onclick="testChartRendering()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Metrics Update</span>
                <div>
                    <span class="test-status status-pending" id="test-metrics-update">Pending</span>
                    <button class="test-button" onclick="testMetricsUpdate()">Test</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-search"></i> SEO Tools Tests</h3>
            <div class="test-item">
                <span class="test-name">SEO Analysis</span>
                <div>
                    <span class="test-status status-pending" id="test-seo-analysis">Pending</span>
                    <button class="test-button" onclick="testSeoAnalysis()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">Keyword Research</span>
                <div>
                    <span class="test-status status-pending" id="test-keyword-research">Pending</span>
                    <button class="test-button" onclick="testKeywordResearch()">Test</button>
                </div>
            </div>
            <div class="test-item">
                <span class="test-name">SEO Scoring</span>
                <div>
                    <span class="test-status status-pending" id="test-seo-scoring">Pending</span>
                    <button class="test-button" onclick="testSeoScoring()">Test</button>
                </div>
            </div>
        </div>

        <div class="test-results" id="test-results">
            <strong>Test Results:</strong><br>
            Ready to run tests...
        </div>
    </div>

    <script>
        let testResults = [];
        let totalTests = 0;
        let passedTests = 0;
        let failedTests = 0;

        function log(message) {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML += message + '<br>';
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        function updateStatus(testId, status, message = '') {
            const statusElement = document.getElementById(testId);
            statusElement.className = `test-status status-${status}`;
            statusElement.textContent = status === 'pass' ? 'Pass' : status === 'fail' ? 'Fail' : 'Pending';
            
            if (status === 'pass') passedTests++;
            if (status === 'fail') failedTests++;
            
            updateSummary();
            
            if (message) {
                log(`${testId}: ${status.toUpperCase()} - ${message}`);
            }
        }

        function updateSummary() {
            document.getElementById('total-tests').textContent = totalTests;
            document.getElementById('passed-tests').textContent = passedTests;
            document.getElementById('failed-tests').textContent = failedTests;
            
            const successRate = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;
            document.getElementById('success-rate').textContent = successRate + '%';
        }

        // Initialize test count
        document.addEventListener('DOMContentLoaded', () => {
            totalTests = document.querySelectorAll('.test-status').length;
            updateSummary();
        });

        // Test Functions
        async function testDashboardInit() {
            try {
                if (typeof window.dashboard !== 'undefined' && window.dashboard) {
                    updateStatus('test-init', 'pass', 'Dashboard object exists and initialized');
                } else {
                    updateStatus('test-init', 'fail', 'Dashboard object not found');
                }
            } catch (error) {
                updateStatus('test-init', 'fail', error.message);
            }
        }

        async function testNavigation() {
            try {
                const navItems = document.querySelectorAll('.nav-item');
                if (navItems.length > 0) {
                    updateStatus('test-nav', 'pass', `Found ${navItems.length} navigation items`);
                } else {
                    updateStatus('test-nav', 'fail', 'No navigation items found');
                }
            } catch (error) {
                updateStatus('test-nav', 'fail', error.message);
            }
        }

        async function testSectionSwitching() {
            try {
                const sections = document.querySelectorAll('.content-section');
                if (sections.length > 0) {
                    updateStatus('test-sections', 'pass', `Found ${sections.length} content sections`);
                } else {
                    updateStatus('test-sections', 'fail', 'No content sections found');
                }
            } catch (error) {
                updateStatus('test-sections', 'fail', error.message);
            }
        }

        async function testToastNotifications() {
            try {
                if (window.dashboard && typeof window.dashboard.showToast === 'function') {
                    window.dashboard.showToast('Test notification', 'success');
                    updateStatus('test-toast', 'pass', 'Toast notification system working');
                } else {
                    updateStatus('test-toast', 'fail', 'Toast notification function not found');
                }
            } catch (error) {
                updateStatus('test-toast', 'fail', error.message);
            }
        }

        async function testUrlValidation() {
            try {
                if (window.converter && typeof window.converter.validateGitHubUrl === 'function') {
                    const validUrl = 'https://github.com/user/repo';
                    const invalidUrl = 'not-a-url';
                    
                    const validResult = window.converter.validateGitHubUrl(validUrl);
                    const invalidResult = window.converter.validateGitHubUrl(invalidUrl);
                    
                    if (validResult && !invalidResult) {
                        updateStatus('test-url-validation', 'pass', 'URL validation working correctly');
                    } else {
                        updateStatus('test-url-validation', 'fail', 'URL validation not working properly');
                    }
                } else {
                    updateStatus('test-url-validation', 'fail', 'URL validation function not found');
                }
            } catch (error) {
                updateStatus('test-url-validation', 'fail', error.message);
            }
        }

        async function testReadmeFetching() {
            try {
                if (window.converter && typeof window.converter.fetchReadmeContent === 'function') {
                    updateStatus('test-readme-fetch', 'pass', 'README fetching function available');
                } else {
                    updateStatus('test-readme-fetch', 'fail', 'README fetching function not found');
                }
            } catch (error) {
                updateStatus('test-readme-fetch', 'fail', error.message);
            }
        }

        async function testConversionProcess() {
            try {
                if (typeof convertSingle === 'function') {
                    updateStatus('test-conversion', 'pass', 'Conversion functions available');
                } else {
                    updateStatus('test-conversion', 'fail', 'Conversion functions not found');
                }
            } catch (error) {
                updateStatus('test-conversion', 'fail', error.message);
            }
        }

        async function testQueueManagement() {
            try {
                if (window.dashboard && Array.isArray(window.dashboard.queue)) {
                    updateStatus('test-queue', 'pass', 'Queue management system available');
                } else {
                    updateStatus('test-queue', 'fail', 'Queue management system not found');
                }
            } catch (error) {
                updateStatus('test-queue', 'fail', error.message);
            }
        }

        async function testBlogPostLoading() {
            try {
                if (window.dashboard && Array.isArray(window.dashboard.blogPosts)) {
                    updateStatus('test-blog-loading', 'pass', `${window.dashboard.blogPosts.length} blog posts loaded`);
                } else {
                    updateStatus('test-blog-loading', 'fail', 'Blog posts not loaded');
                }
            } catch (error) {
                updateStatus('test-blog-loading', 'fail', error.message);
            }
        }

        async function testSearchFunctionality() {
            try {
                const searchInput = document.getElementById('posts-search');
                if (searchInput) {
                    updateStatus('test-search', 'pass', 'Search input element found');
                } else {
                    updateStatus('test-search', 'fail', 'Search input element not found');
                }
            } catch (error) {
                updateStatus('test-search', 'fail', error.message);
            }
        }

        async function testFilterSystem() {
            try {
                const filterSelect = document.getElementById('posts-filter');
                if (filterSelect) {
                    updateStatus('test-filter', 'pass', 'Filter system available');
                } else {
                    updateStatus('test-filter', 'fail', 'Filter system not found');
                }
            } catch (error) {
                updateStatus('test-filter', 'fail', error.message);
            }
        }

        async function testViewSwitching() {
            try {
                if (typeof setPostsView === 'function') {
                    updateStatus('test-view-switch', 'pass', 'View switching function available');
                } else {
                    updateStatus('test-view-switch', 'fail', 'View switching function not found');
                }
            } catch (error) {
                updateStatus('test-view-switch', 'fail', error.message);
            }
        }

        async function testAnalyticsLoading() {
            try {
                if (window.analytics) {
                    updateStatus('test-analytics-loading', 'pass', 'Analytics system loaded');
                } else {
                    updateStatus('test-analytics-loading', 'fail', 'Analytics system not found');
                }
            } catch (error) {
                updateStatus('test-analytics-loading', 'fail', error.message);
            }
        }

        async function testChartRendering() {
            try {
                const chartCanvas = document.getElementById('activity-chart');
                if (chartCanvas) {
                    updateStatus('test-chart-render', 'pass', 'Chart canvas element found');
                } else {
                    updateStatus('test-chart-render', 'fail', 'Chart canvas element not found');
                }
            } catch (error) {
                updateStatus('test-chart-render', 'fail', error.message);
            }
        }

        async function testMetricsUpdate() {
            try {
                const metricsElements = ['total-views', 'total-posts', 'github-posts', 'avg-seo-score'];
                const foundElements = metricsElements.filter(id => document.getElementById(id));
                
                if (foundElements.length === metricsElements.length) {
                    updateStatus('test-metrics-update', 'pass', 'All metrics elements found');
                } else {
                    updateStatus('test-metrics-update', 'fail', `Missing ${metricsElements.length - foundElements.length} metrics elements`);
                }
            } catch (error) {
                updateStatus('test-metrics-update', 'fail', error.message);
            }
        }

        async function testSeoAnalysis() {
            try {
                if (typeof analyzeSEO === 'function') {
                    updateStatus('test-seo-analysis', 'pass', 'SEO analysis function available');
                } else {
                    updateStatus('test-seo-analysis', 'fail', 'SEO analysis function not found');
                }
            } catch (error) {
                updateStatus('test-seo-analysis', 'fail', error.message);
            }
        }

        async function testKeywordResearch() {
            try {
                if (typeof researchKeywords === 'function') {
                    updateStatus('test-keyword-research', 'pass', 'Keyword research function available');
                } else {
                    updateStatus('test-keyword-research', 'fail', 'Keyword research function not found');
                }
            } catch (error) {
                updateStatus('test-keyword-research', 'fail', error.message);
            }
        }

        async function testSeoScoring() {
            try {
                if (window.seoTools && window.seoTools.seoRules) {
                    updateStatus('test-seo-scoring', 'pass', 'SEO scoring system available');
                } else {
                    updateStatus('test-seo-scoring', 'fail', 'SEO scoring system not found');
                }
            } catch (error) {
                updateStatus('test-seo-scoring', 'fail', error.message);
            }
        }

        async function runAllTests() {
            log('Starting comprehensive test suite...');
            
            // Reset counters
            passedTests = 0;
            failedTests = 0;
            
            // Core Dashboard Tests
            await testDashboardInit();
            await testNavigation();
            await testSectionSwitching();
            await testToastNotifications();
            
            // GitHub Converter Tests
            await testUrlValidation();
            await testReadmeFetching();
            await testConversionProcess();
            await testQueueManagement();
            
            // Blog Management Tests
            await testBlogPostLoading();
            await testSearchFunctionality();
            await testFilterSystem();
            await testViewSwitching();
            
            // Analytics Tests
            await testAnalyticsLoading();
            await testChartRendering();
            await testMetricsUpdate();
            
            // SEO Tools Tests
            await testSeoAnalysis();
            await testKeywordResearch();
            await testSeoScoring();
            
            log(`\nTest suite completed: ${passedTests}/${totalTests} tests passed`);
            
            if (passedTests === totalTests) {
                log('🎉 All tests passed! Dashboard is fully functional.');
            } else {
                log(`⚠️ ${failedTests} tests failed. Check individual test results above.`);
            }
        }
    </script>
</body>
</html>
